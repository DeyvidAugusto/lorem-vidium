<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="src/styles/style.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
    <title>Search Results</title>
</head>
<body>
    <div class="navbar">
        <div class="navbar-container">
            <div class="logo-container">
                <img src="src/img/lorem-vidium-logo.png" class="logo">
            </div>
            <div class="menu-container">
                <ul class="menu-list">
                    <li class="menu-list-item">
                        <a href="">Popular</a>
                    </li>
                    <li class="menu-list-item">
                        <a href="">Movies</a>
                    </li>
                    <li class="menu-list-item">
                        <a href="">Series</a>
                    </li>
                    <li class="menu-list-item">
                        <a href="">Animes</a>
                    </li>
                </ul>
                <form action="">
                    <input name="pesquisa" placeholder="Something in mind?">
                    <button class="fa fa-search"></button>
                </form>
            </div>
        </div>
    </div>
    <div class="sidebar">
        <i class="left-menu-icon fas fa-home"></i>
        <i class="left-menu-icon fas fa-bookmark"></i>

    </div>
    <div class="container-search">
        <div class="search-title"></div>
            <h1>Search Results</h1>
    </div>
        <div class="search-movie-list"></div>
</body>
<script>
    const apiKey = "201bb061";

function getPesquisa() {
    return localStorage.getItem('pesquisa');
}

function carregaLista(json) {
    const lista = document.querySelector('div.search-movie-list');
    lista.innerHTML = "";
    json.Search.forEach((element) => {
        console.log(element);

        let item = document.createElement('div');
        item.classList.add('search-movie-list-item');

        item.innerHTML = `<img class="serch-movie-list-item-img" src="${element.Poster}" alt=""/> <span class="search-movie-list-item-title">${element.Title}</span> <button class="search-movie-list-item-button">Assistir</button>`;

        lista.appendChild(item);
    });
};

document.addEventListener('DOMContentLoaded', () => {
    const pesquisa = getPesquisa();
    if (pesquisa) {
        fetch(`http://www.omdbapi.com/?s=${pesquisa}&apikey=${apiKey}`)
            .then(result => result.json())
            .then(json => carregaLista(json));
    }
});
</script>
<style>
    /* gambiarra pra navbar ficar igual nas paginas */
    form {
        top: 15px;
    }
    .logo {
        padding-top: 4px;
    }
</style>
</html>
